# 2.13

## 练习 2.13 请证明，在误差为很小的百分数的条件下，存在着一个简单公式，利用它可以从两个被乘区间的误差算出乘积的百分数误差值。你可以假定所有的数为正，以简化这一问题。

---

在前面的练习[2.11](https://sicp.jiwai.win/zh_cn/2.-%E6%9E%84%E9%80%A0%E6%95%B0%E6%8D%AE%E6%8A%BD%E8%B1%A1/2.11.html) 中，已经讨论了区间相乘的 9 种情况。在所有的数都为正的情况下，有：

$$
[x_1, x_2] \cdot [y_1, y_2] = [x_1\cdot y_1, x_2 \cdot y_2]
$$

一个区间的百分数误差值和宽度以及中心点的关系是：

$$
center \cdot percent = width
$$


```eval-scheme
(define (make-interval a b) (cons a b))
(define upper-bound cdr)
(define lower-bound car)
(define (add-interval x y) 
    (make-interval (+ (lower-bound x) (lower-bound y))
                    (+ (upper-bound x) (upper-bound y))))
(define (sub-interval x y) (add-interval x (make-interval (- 0 (upper-bound y)) (- 0 (lower-bound y)))))
(define (subtract-interval x y)
    (define p1 (- (lower-bound x) (lower-bound y)))
    (define p2 (- (lower-bound x) (upper-bound y)))
    (define p3 (- (upper-bound x) (lower-bound y)))
    (define p4 (- (upper-bound x) (upper-bound y)))
    
    (make-interval (min p1 p2 p3 p4) (max p1 p2 p3 p4)))

(define (mul-interval x y)
    (define p1 (* (lower-bound x) (lower-bound y)))
    (define p2 (* (lower-bound x) (upper-bound y)))
    (define p3 (* (upper-bound x) (lower-bound y)))
    (define p4 (* (upper-bound x) (upper-bound y)))

    (make-interval (min p1 p2 p3 p4) (max p1 p2 p3 p4))
)

(define int1 (make-interval 2 4))
(define int2 (make-interval 3 6))
(mul-interval int1 int2)
```

```eval-scheme
(define (make-center-percent center percent)
  (make-interval (- center (* center percent))
                 (+ center (* center percent))))

(define (center x) (/ (+ (lower-bound x) (upper-bound x)) 2))

(define (percent x)
  (/ (width x) (center x)))

(define int (make-center-percent 2 0.5))
int
```

```eval-scheme
(center int)
```

```eval-scheme
(define (width x) (/ (- (upper-bound x) (lower-bound x)) 2))
(percent int)
```

先用几个例子找一下规律：

```eval-scheme
(define i1 (make-center-percent 2 0.5))
(define i2 (make-center-percent 2 0.25))

i1
```

```eval-scheme
i2
```

```eval-scheme
(define i3 (mul-interval i1 i2))
i3
```

```eval-scheme
(percent i3)
```

看起来是 (1/2) * (1/4) = (1/3) = (1+1) / (2+4)