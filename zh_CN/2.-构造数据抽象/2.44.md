# 2.44

## 练习 2.44 请定义出corner-split里使用的过程up-split，它与right-split类似，除在其中交换了below和beside的角色之外。

---

暂未找到如何用 Scheme 操纵浏览器元素的简单方案，先用 JavaScript 来探索一下：

<img src='https://images.ctfassets.net/qixg1o8tujmf/7m0jrKYaDBwEvlc5lo8nt6/6d50a5050d9cdc0d4d2047e35feac292/10648733_696750647079056_2800539603462658695_o.jpg' alt='Jeff Tian' style="width: 10px; height: 10px;" id="jeff-tian">


### the Jeff Tian painter 
<canvas id="my-canvas" style="max-width: 300px;"></canvas>

```eval-js
img = document.querySelector('#jeff-tian');

const framedPainter = (frameX, frameY, frameWidth, frameHeight) => (painter) => {
    painter(frameX, frameY, frameWidth, frameHeight);
};

drawToFrame = (frame, width, height) => (framedPainter) => {
    const canvas = document.querySelector(frame);
    canvas.width = width;
    canvas.height = height;

    const ctx = canvas.getContext('2d');
    framedPainter(ctx);
};

const createPainter = (image, sourceX, sourceY, sourceWidth, sourceHeight) => (frameX, frameY, frameWidth, frameHeight) => (ctx) => {
    ctx.drawImage(image, sourceX, sourceY, sourceWidth, sourceHeight, frameX, frameY, frameWidth, frameHeight);
};

jeffTianPainter = createPainter(img, 0, 0, img.naturalWidth, img.naturalHeight);

onLoadOrLoadAlready = (img, handler) => {
    if(img.complete) {
        handler();
    }

    img.addEventListener('load', handler);
}; 

onLoadOrLoadAlready(img, () => drawToFrame('#my-canvas', img.naturalWidth, img.naturalHeight)(jeffTianPainter(0, 0, img.naturalWidth, img.naturalHeight)));

img.onerror = () => {
    location.reload();
};
```


### beside
<canvas id="beside-canvas" style="max-width: 300px;"></canvas>

```eval-js
const beside = (painter1, painter2) => (ctx) => {
    painter1(0, 0, 400, 600)(ctx);
    painter2(401, 0, 400, 600)(ctx);
};

const besidePainter = beside(jeffTianPainter, jeffTianPainter);

onLoadOrLoadAlready(img, () => drawToFrame('#beside-canvas', 800, 600)(besidePainter));

console.log('beside done');  
```

### below
<canvas id="below-canvas" style="max-width: 300px;"></canvas>
```eval-js
const below = (painter1, painter2) => (ctx) => {
    painter1(0, 0, 800, 300)(ctx);
    painter2(0, 301, 800, 300)(ctx);
};

const belowPainter = below(jeffTianPainter, jeffTianPainter);

onLoadOrLoadAlready(img, () => drawToFrame('#below-canvas', 800, 600)(belowPainter));

console.log('below done');
```

### flip-vert
<canvas id="flip-vert-canvas" style="max-width: 300px;"></canvas>
```eval-js
const flipVert = (painter) => (ctx) => {
    ctx.scale(1, -1);
    painter(0, 0, 800, -600)(ctx);
}

const flipVertPainter = flipVert(jeffTianPainter);

onLoadOrLoadAlready(img, () => drawToFrame('#flip-vert-canvas', 800, 600)(flipVertPainter));

console.log('flip-vert done');
```

### flip-horiz

<canvas id="flip-horiz-canvas" style="max-width: 300px"></canvas>
```eval-js
const flipHoriz = (painter) => (ctx) => {
    ctx.scale(-1, 1);
    painter(0, 0, -800, 600)(ctx);
};
const flipHorizPainter = flipHoriz(jeffTianPainter);
onLoadOrLoadAlready(img, ()=>drawToFrame('#flip-horiz-canvas', 800, 600)(flipHorizPainter));
```

```eval-js
// nothing here
```