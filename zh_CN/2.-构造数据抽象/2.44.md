# 2.44

## 练习 2.44 请定义出corner-split里使用的过程up-split，它与right-split类似，除在其中交换了below和beside的角色之外。

---

暂未找到如何用 Scheme 操纵浏览器元素的简单方案，先用 JavaScript 来探索一下：

<img src='https://images.ctfassets.net/qixg1o8tujmf/7m0jrKYaDBwEvlc5lo8nt6/6d50a5050d9cdc0d4d2047e35feac292/10648733_696750647079056_2800539603462658695_o.jpg' alt='Jeff Tian' style="width: 10px; height: 10px;" id="jeff-tian">


### the Jeff Tian painter 
<canvas id="my-canvas" style="max-width: 300px;"></canvas>

```eval-js
img = document.querySelector('#jeff-tian');

const framedPainter = (frameX, frameY, frameWidth, frameHeight) => (painter) => {
    painter(frameX, frameY, frameWidth, frameHeight);
};

drawToFrame = (frame, width, height) => (framedPainter) => {
    const canvas = document.querySelector(frame);
    canvas.width = width;
    canvas.height = height;

    const ctx = canvas.getContext('2d');
    framedPainter(ctx);
};

const createPainter = (image, sourceX, sourceY, sourceWidth, sourceHeight) => (frameX, frameY, frameWidth, frameHeight) => (ctx) => {
    ctx.drawImage(image, sourceX, sourceY, sourceWidth, sourceHeight, frameX, frameY, frameWidth, frameHeight);
};

// (x, y, w, h) -> ctx -> void
jeffTianPainter = createPainter(img, 0, 0, img.naturalWidth, img.naturalHeight);

onLoadOrLoadAlready = (img, handler) => {
    if(img.complete) {
        handler();
    }

    img.addEventListener('load', handler);
}; 

onLoadOrLoadAlready(img, () => drawToFrame('#my-canvas', img.naturalWidth, img.naturalHeight)(jeffTianPainter(0, 0, img.naturalWidth, img.naturalHeight)));

img.onerror = () => {
    location.reload();
};
```


### beside
<canvas id="beside-canvas" style="max-width: 300px;"></canvas>

```eval-js
// ((x, y, w, h) -> ctx -> void, 
// (x, y, w, h) -> ctx -> void) ->
// (x, y, w, h) -> ctx -> void
beside = (painter1, painter2) => (x, y, w, h) => (ctx) => {
    painter1(x, y, Math.floor(w/2), h)(ctx);
    painter2(Math.floor(w/2) + 1, y, Math.ceil(w/2), h)(ctx);
};

// (x, y, w, h) -> ctx -> void
const besidePainter = beside(jeffTianPainter, jeffTianPainter);

onLoadOrLoadAlready(img, () => drawToFrame('#beside-canvas', img.naturalWidth, img.naturalHeight)(besidePainter(0, 0, img.naturalWidth, img.naturalHeight)));

console.log('beside done');  
```

### below
<canvas id="below-canvas" style="max-width: 300px;"></canvas>

```eval-js
const below = (painter1, painter2) => (x, y, w, h) => (ctx) => {
    painter1(x, y, w, Math.floor(h/2))(ctx);
    painter2(x, Math.floor(h/2)+1, w, Math.ceil(h/2))(ctx);
};

const belowPainter = below(jeffTianPainter, jeffTianPainter);

onLoadOrLoadAlready(img, () => drawToFrame('#below-canvas', img.naturalWidth, img.naturalHeight)(belowPainter(0, 0, img.naturalWidth, img.naturalHeight)));

```

### flip-vert
<canvas id="flip-vert-canvas" style="max-width: 300px;"></canvas>

```eval-js
// painter -> ctx -> void
flipVert = (painter) => (x, y, w, h) => (ctx) => {
    ctx.scale(1, -1);
    painter(x, y, w, -h)(ctx);
}

const flipVertPainter = flipVert(jeffTianPainter);

onLoadOrLoadAlready(img, () => drawToFrame('#flip-vert-canvas', img.naturalWidth, img.naturalHeight)(flipVertPainter(0, 0, img.naturalWidth, img.naturalHeight)));

```

### flip-horiz

<canvas id="flip-horiz-canvas" style="max-width: 300px;"></canvas>

```eval-js
const flipHoriz = (painter) => (x, y, w, h) => (ctx) => {
    ctx.scale(-1, 1);
    painter(x, y, -w, h)(ctx);
};
const flipHorizPainter = flipHoriz(jeffTianPainter);
onLoadOrLoadAlready(img, ()=>drawToFrame('#flip-horiz-canvas', img.naturalWidth, img.naturalHeight)(flipHorizPainter(0, 0, img.naturalWidth, img.naturalHeight)));
```

### wave2 with Jeff Tian Painter
<canvas id="wave2-canvas" style="max-width: 300px;"></canvas>

```eval-js
const wave2 = beside(jeffTianPainter, flipVert(jeffTianPainter));

onLoadOrLoadAlready(img, () => drawToFrame('#wave2-canvas', img.naturalWidth, img.naturalHeight)(wave2(0, 0, img.naturalWidth, img.naturalHeight)));
```


```eval-js
// placeholder, nothing here
```